0f5020a9f6fb0e7bf0432b23ae4be689
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

Object.defineProperty(exports, "__esModule", {
  value: true
});

var tslib_1 = require("tslib");

var core_1 = require("@bluebase/core");

var FormTextInput_1 = require("../FormTextInput");

var formik_1 = require("formik");

var index_1 = tslib_1.__importDefault(require("../../../index"));

var react_1 = tslib_1.__importDefault(require("react"));

var enzyme_1 = require("enzyme");

var enzyme_async_helpers_1 = require("enzyme-async-helpers");

var fieldProps = [{
  helperText: 'This is a helper text',
  label: 'Username',
  name: 'username',
  required: true,
  type: 'text',
  number: 123
}, {
  label: 'Email',
  name: 'email',
  required: true,
  type: 'email'
}, {
  label: 'number',
  name: 'number',
  type: 'number'
}];
var initialValues = {
  username: 'foo'
};
describe('FormTextInput', function () {
  it('should render all form fields in the schema', function _callee() {
    var onSubmit, component;
    return _regenerator.default.async(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(FormTextInput_1.FormTextInput, (0, _extends2.default)({}, fieldProps[0])))));
            _context.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, FormTextInput_1.FormTextInput));

          case 4:
            expect(component.find('TextInput').last().prop('name')).toBe('username');
            expect(component.find('TextInput').last().prop('value')).toBe('foo');
            expect(component.find('TextInput').last().prop('type')).toBe('text');

          case 7:
          case "end":
            return _context.stop();
        }
      }
    });
  });
  it('should validate required fields', function _callee2() {
    var onSubmit, component, validate;
    return _regenerator.default.async(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(FormTextInput_1.FormTextInput, (0, _extends2.default)({}, fieldProps[0])))));
            _context2.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, FormTextInput_1.FormTextInput));

          case 4:
            validate = component.find('FieldInner[name="username"]').last().prop('validate');
            expect(validate('')).toBe('This field is required');
            expect(validate('foo')).toBeUndefined();

          case 7:
          case "end":
            return _context2.stop();
        }
      }
    });
  });
  it('should validate email fields', function _callee3() {
    var onSubmit, component, validate;
    return _regenerator.default.async(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(FormTextInput_1.FormTextInput, (0, _extends2.default)({}, fieldProps[1])))));
            _context3.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, FormTextInput_1.FormTextInput));

          case 4:
            validate = component.find('FieldInner[name="email"]').last().prop('validate');
            expect(validate('foo bar')).toBe('Please enter a valid email address');
            expect(validate('foo@bar.com')).toBeUndefined();

          case 7:
          case "end":
            return _context3.stop();
        }
      }
    });
  });
  it('should validate number field', function _callee4() {
    var onSubmit, component, validate;
    return _regenerator.default.async(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(FormTextInput_1.FormTextInput, (0, _extends2.default)({}, fieldProps[2])))));
            _context4.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, FormTextInput_1.FormTextInput));

          case 4:
            validate = component.find('FieldInner[name="number"]').last().prop('validate');
            expect(validate('name')).toBe('Please enter a valid number');

          case 6:
          case "end":
            return _context4.stop();
        }
      }
    });
  });
  it('should only be alphabet', function _callee5() {
    var onSubmit, component, validate;
    return _regenerator.default.async(function _callee5$(_context5) {
      while (1) {
        switch (_context5.prev = _context5.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(FormTextInput_1.FormTextInput, (0, _extends2.default)({}, fieldProps[0])))));
            _context5.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, FormTextInput_1.FormTextInput));

          case 4:
            validate = component.find('FieldInner[name="username"]').last().prop('validate');
            expect(validate(12)).toBe('Should only be alphabet');

          case 6:
          case "end":
            return _context5.stop();
        }
      }
    });
  });
  it('should update field value when onChangeText callback is invoked', function _callee6() {
    var onSubmit, component, onChangeText;
    return _regenerator.default.async(function _callee6$(_context6) {
      while (1) {
        switch (_context6.prev = _context6.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: {},
              onSubmit: onSubmit
            }, react_1.default.createElement(FormTextInput_1.FormTextInput, (0, _extends2.default)({}, fieldProps[0])))));
            _context6.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, FormTextInput_1.FormTextInput));

          case 4:
            expect(component.find('TextInput').last().prop('name')).toBe('username');
            expect(component.find('TextInput').last().prop('value')).toBeUndefined();
            expect(component.find('TextInput').last().prop('type')).toBe('text');
            expect(component.find('TextInput').last().prop('helperText')).toBe('This is a helper text');
            onChangeText = component.find('TextInput').first().prop('onChangeText');
            onChangeText('bar');
            component.update();
            _context6.next = 13;
            return _regenerator.default.awrap(Promise.resolve());

          case 13:
            setTimeout(function () {
              expect(component.find('TextInput').last().prop('value')).toBe('bar');
            });

          case 14:
          case "end":
            return _context6.stop();
        }
      }
    });
  });
  it('should render error state if validation fails', function _callee7() {
    var onSubmit, component, formik;
    return _regenerator.default.async(function _callee7$(_context7) {
      while (1) {
        switch (_context7.prev = _context7.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: {},
              onSubmit: onSubmit
            }, react_1.default.createElement(FormTextInput_1.FormTextInput, (0, _extends2.default)({}, fieldProps[0])))));
            _context7.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, FormTextInput_1.FormTextInput));

          case 4:
            expect(component.find('TextInput').last().prop('name')).toBe('username');
            expect(component.find('TextInput').last().prop('value')).toBeUndefined();
            expect(component.find('TextInput').last().prop('type')).toBe('text');
            expect(component.find('TextInput').last().prop('helperText')).toBe('This is a helper text');
            formik = component.find('FieldInner').first().prop('formik');
            formik.setFieldValue('username', null);
            formik.validateField('username');
            formik.handleSubmit();
            _context7.next = 14;
            return _regenerator.default.awrap(Promise.resolve());

          case 14:
            component.update();
            setTimeout(function () {
              expect(component).toMatchSnapshot();
              expect(component.find('TextInput').last().prop('helperText')).toBe('This is a helper text');
            });

          case 16:
          case "end":
            return _context7.stop();
        }
      }
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL211enphbWlsL0RvY3VtZW50cy9ibHVlYmFzZS9wbHVnaW4tanNvbi1zY2hlbWEtY29tcG9uZW50cy9zcmMvSnNvbkZvcm0vRmllbGRzL19fdGVzdHNfXy9Gb3JtVGV4dElucHV0LnRlc3QudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxNQUFBLEdBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUE7O0FBQ0EsSUFBQSxlQUFBLEdBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUE7O0FBQ0EsSUFBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTs7QUFDQSxJQUFBLE9BQUEsR0FBQSxPQUFBLENBQUEsZUFBQSxDQUFBLE9BQUEsQ0FBQSxnQkFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxPQUFBLEdBQUEsT0FBQSxDQUFBLGVBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTs7QUFDQSxJQUFBLHNCQUFBLEdBQUEsT0FBQSxDQUFBLHNCQUFBLENBQUE7O0FBRUEsSUFBTSxVQUFVLEdBQUcsQ0FBQztBQUNuQixFQUFBLFVBQVUsRUFBRSx1QkFETztBQUVuQixFQUFBLEtBQUssRUFBRSxVQUZZO0FBR25CLEVBQUEsSUFBSSxFQUFFLFVBSGE7QUFJbkIsRUFBQSxRQUFRLEVBQUUsSUFKUztBQUtuQixFQUFBLElBQUksRUFBRSxNQUxhO0FBTW5CLEVBQUEsTUFBTSxFQUFHO0FBTlUsQ0FBRCxFQU9oQjtBQUNGLEVBQUEsS0FBSyxFQUFFLE9BREw7QUFFRixFQUFBLElBQUksRUFBRSxPQUZKO0FBR0YsRUFBQSxRQUFRLEVBQUUsSUFIUjtBQUlGLEVBQUEsSUFBSSxFQUFFO0FBSkosQ0FQZ0IsRUFZakI7QUFDRCxFQUFBLEtBQUssRUFBRSxRQUROO0FBRUQsRUFBQSxJQUFJLEVBQUUsUUFGTDtBQUdELEVBQUEsSUFBSSxFQUFFO0FB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dGVudCI6WyJpbXBvcnQgeyBCbHVlQmFzZUFwcCB9IGZyb20gJ0BibHVlYmFzZS9jb3JlJztcbmltcG9ydCB7IEZvcm1UZXh0SW5wdXQgfSBmcm9tICcuLi9Gb3JtVGV4dElucHV0JztcbmltcG9ydCB7IEZvcm1payB9IGZyb20gJ2Zvcm1payc7XG5pbXBvcnQgUGx1Z2luIGZyb20gJy4uLy4uLy4uL2luZGV4JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtb3VudCB9IGZyb20gJ2VuenltZSc7XG5pbXBvcnQgeyB3YWl0Rm9yRWxlbWVudCB9IGZyb20gJ2VuenltZS1hc3luYy1oZWxwZXJzJztcblxuY29uc3QgZmllbGRQcm9wcyA9IFt7XG5cdGhlbHBlclRleHQ6ICdUaGlzIGlzIGEgaGVscGVyIHRleHQnLFxuXHRsYWJlbDogJ1VzZXJuYW1lJyxcblx0bmFtZTogJ3VzZXJuYW1lJyxcblx0cmVxdWlyZWQ6IHRydWUsXG5cdHR5cGU6ICd0ZXh0Jyxcblx0bnVtYmVyIDogMTIzXG59LCB7XG5cdGxhYmVsOiAnRW1haWwnLFxuXHRuYW1lOiAnZW1haWwnLFxuXHRyZXF1aXJlZDogdHJ1ZSxcblx0dHlwZTogJ2VtYWlsJyxcbn0se1xuXHRsYWJlbDogJ251bWJlcicsXG5cdG5hbWU6ICdudW1iZXInLFxuXHR0eXBlOiAnbnVtYmVyJyxcbn1dO1xuXG5jb25zdCBpbml0aWFsVmFsdWVzID0ge1xuXHR1c2VybmFtZTogJ2ZvbycsXG59O1xuXG5cbmRlc2NyaWJlKCdGb3JtVGV4dElucHV0JywgKCkgPT4ge1xuXG5cblx0aXQoJ3Nob3VsZCByZW5kZXIgYWxsIGZvcm0gZmllbGRzIGluIHRoZSBzY2hlbWEnLCBhc3luYyAoKSA9PiB7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGplc3QuZm4oKTtcblxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG1vdW50KFxuXHRcdFx0PEJsdWVCYXNlQXBwIHBsdWdpbnM9e1tQbHVnaW5dfT5cblx0XHRcdFx0PEZvcm1payBpbml0aWFsVmFsdWVzPXtpbml0aWFsVmFsdWVzfSBvblN1Ym1pdD17b25TdWJtaXR9PlxuXHRcdFx0XHRcdDxGb3JtVGV4dElucHV0IHsuLi5maWVsZFByb3BzWzBdfSAvPlxuXHRcdFx0XHQ8L0Zvcm1paz5cblx0XHRcdDwvQmx1ZUJhc2VBcHA+XG5cdFx0KTtcblxuXHRcdGF3YWl0IHdhaXRGb3JFbGVtZW50KGNvbXBvbmVudCBhcyBhbnksIEZvcm1UZXh0SW5wdXQpO1xuXG5cdFx0Ly8gZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cblx0XHQvLyBDaGVjayBmaWVsZHNcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ1RleHRJbnB1dCcpLmxhc3QoKS5wcm9wKCduYW1lJykpLnRvQmUoJ3VzZXJuYW1lJyk7XG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdUZXh0SW5wdXQnKS5sYXN0KCkucHJvcCgndmFsdWUnKSkudG9CZSgnZm9vJyk7XG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdUZXh0SW5wdXQnKS5sYXN0KCkucHJvcCgndHlwZScpKS50b0JlKCd0ZXh0Jyk7XG5cdH0pO1xuXG5cblx0aXQoJ3Nob3VsZCB2YWxpZGF0ZSByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGplc3QuZm4oKTtcblxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG1vdW50KFxuXHRcdFx0PEJsdWVCYXNlQXBwIHBsdWdpbnM9e1tQbHVnaW5dfT5cblx0XHRcdFx0PEZvcm1payBpbml0aWFsVmFsdWVzPXtpbml0aWFsVmFsdWVzfSBvblN1Ym1pdD17b25TdWJtaXR9PlxuXHRcdFx0XHRcdDxGb3JtVGV4dElucHV0IHsuLi5maWVsZFByb3BzWzBdfSAvPlxuXHRcdFx0XHQ8L0Zvcm1paz5cblx0XHRcdDwvQmx1ZUJhc2VBcHA+XG5cdFx0KTtcblxuXHRcdGF3YWl0IHdhaXRGb3JFbGVtZW50KGNvbXBvbmVudCBhcyBhbnksIEZvcm1UZXh0SW5wdXQpO1xuXG5cdFx0Ly8gZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cblx0XHRjb25zdCB2YWxpZGF0ZTogYW55ID0gY29tcG9uZW50LmZpbmQoJ0ZpZWxkSW5uZXJbbmFtZT1cInVzZXJuYW1lXCJdJykubGFzdCgpLnByb3AoJ3ZhbGlkYXRlJyk7XG5cblx0XHQvLyBDaGVjayBmaWVsZHNcblx0XHRleHBlY3QodmFsaWRhdGUoJycpKS50b0JlKCdUaGlzIGZpZWxkIGlzIHJlcXVpcmVkJyk7XG5cdFx0ZXhwZWN0KHZhbGlkYXRlKCdmb28nKSkudG9CZVVuZGVmaW5lZCgpO1xuXHR9KTtcblxuXG5cdGl0KCdzaG91bGQgdmFsaWRhdGUgZW1haWwgZmllbGRzJywgYXN5bmMgKCkgPT4ge1xuXG5cdFx0Y29uc3Qgb25TdWJtaXQgPSBqZXN0LmZuKCk7XG5cblx0XHRjb25zdCBjb21wb25lbnQgPSBtb3VudChcblx0XHRcdDxCbHVlQmFzZUFwcCBwbHVnaW5zPXtbUGx1Z2luXX0+XG5cdFx0XHRcdDxGb3JtaWsgaW5pdGlhbFZhbHVlcz17aW5pdGlhbFZhbHVlc30gb25TdWJtaXQ9e29uU3VibWl0fT5cblx0XHRcdFx0XHQ8Rm9ybVRleHRJbnB1dCB7Li4uZmllbGRQcm9wc1sxXX0gLz5cblx0XHRcdFx0PC9Gb3JtaWs+XG5cdFx0XHQ8L0JsdWVCYXNlQXBwPlxuXHRcdCk7XG5cblx0XHRhd2FpdCB3YWl0Rm9yRWxlbWVudChjb21wb25lbnQgYXMgYW55LCBGb3JtVGV4dElucHV0KTtcblxuXHRcdC8vIGV4cGVjdChjb21wb25lbnQpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXG5cdFx0Y29uc3QgdmFsaWRhdGU6IGFueSA9IGNvbXBvbmVudC5maW5kKCdGaWVsZElubmVyW25hbWU9XCJlbWFpbFwiXScpLmxhc3QoKS5wcm9wKCd2YWxpZGF0ZScpO1xuXG5cdFx0Ly8gQ2hlY2sgZmllbGRzXG5cdFx0ZXhwZWN0KHZhbGlkYXRlKCdmb28gYmFyJykpLnRvQmUoJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3MnKTtcblx0XHRleHBlY3QodmFsaWRhdGUoJ2Zvb0BiYXIuY29tJykpLnRvQmVVbmRlZmluZWQoKTtcblx0fSk7XG5cblx0aXQoJ3Nob3VsZCB2YWxpZGF0ZSBudW1iZXIgZmllbGQnLCBhc3luYyAoKSA9PiB7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGplc3QuZm4oKTtcblxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG1vdW50KFxuXHRcdFx0PEJsdWVCYXNlQXBwIHBsdWdpbnM9e1tQbHVnaW5dfT5cblx0XHRcdFx0PEZvcm1payBpbml0aWFsVmFsdWVzPXtpbml0aWFsVmFsdWVzfSBvblN1Ym1pdD17b25TdWJtaXR9PlxuXHRcdFx0XHRcdDxGb3JtVGV4dElucHV0IHsuLi5maWVsZFByb3BzWzJdfSAvPlxuXHRcdFx0XHQ8L0Zvcm1paz5cblx0XHRcdDwvQmx1ZUJhc2VBcHA+XG5cdFx0KTtcblxuXHRcdGF3YWl0IHdhaXRGb3JFbGVtZW50KGNvbXBvbmVudCBhcyBhbnksIEZvcm1UZXh0SW5wdXQpO1xuXG5cdFx0Ly8gZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cblx0XHRjb25zdCB2YWxpZGF0ZTogYW55ID0gY29tcG9uZW50LmZpbmQoJ0ZpZWxkSW5uZXJbbmFtZT1cIm51bWJlclwiXScpLmxhc3QoKS5wcm9wKCd2YWxpZGF0ZScpO1xuXG5cdFx0Ly8gQ2hlY2sgZmllbGRzXG5cdFx0ZXhwZWN0KHZhbGlkYXRlKCduYW1lJykpLnRvQmUoJ1BsZWFzZSBlbnRlciBhIHZhbGlkIG51bWJlcicpO1xuXHR9KTtcblx0aXQoJ3Nob3VsZCBvbmx5IGJlIGFscGhhYmV0JywgYXN5bmMgKCkgPT4ge1xuXG5cdFx0Y29uc3Qgb25TdWJtaXQgPSBqZXN0LmZuKCk7XG5cblx0XHRjb25zdCBjb21wb25lbnQgPSBtb3VudChcblx0XHRcdDxCbHVlQmFzZUFwcCBwbHVnaW5zPXtbUGx1Z2luXX0+XG5cdFx0XHRcdDxGb3JtaWsgaW5pdGlhbFZhbHVlcz17aW5pdGlhbFZhbHVlc30gb25TdWJtaXQ9e29uU3VibWl0fT5cblx0XHRcdFx0XHQ8Rm9ybVRleHRJbnB1dCB7Li4uZmllbGRQcm9wc1swXX0gLz5cblx0XHRcdFx0PC9Gb3JtaWs+XG5cdFx0XHQ8L0JsdWVCYXNlQXBwPlxuXHRcdCk7XG5cblx0XHRhd2FpdCB3YWl0Rm9yRWxlbWVudChjb21wb25lbnQgYXMgYW55LCBGb3JtVGV4dElucHV0KTtcblxuXHRcdC8vIGV4cGVjdChjb21wb25lbnQpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXG5cdFx0Y29uc3QgdmFsaWRhdGU6IGFueSA9IGNvbXBvbmVudC5maW5kKCdGaWVsZElubmVyW25hbWU9XCJ1c2VybmFtZVwiXScpLmxhc3QoKS5wcm9wKCd2YWxpZGF0ZScpO1xuXG5cdFx0Ly8gQ2hlY2sgZmllbGRzXG5cdFx0ZXhwZWN0KHZhbGlkYXRlKDEyKSkudG9CZSgnU2hvdWxkIG9ubHkgYmUgYWxwaGFiZXQnKTtcblx0fSk7XG5cblxuXHRpdCgnc2hvdWxkIHVwZGF0ZSBmaWVsZCB2YWx1ZSB3aGVuIG9uQ2hhbmdlVGV4dCBjYWxsYmFjayBpcyBpbnZva2VkJywgYXN5bmMgKCkgPT4ge1xuXG5cdFx0Y29uc3Qgb25TdWJtaXQgPSBqZXN0LmZuKCk7XG5cblx0XHRjb25zdCBjb21wb25lbnQgPSBtb3VudChcblx0XHRcdDxCbHVlQmFzZUFwcCBwbHVnaW5zPXtbUGx1Z2luXX0+XG5cdFx0XHRcdDxGb3JtaWsgaW5pdGlhbFZhbHVlcz17e319IG9uU3VibWl0PXtvblN1Ym1pdH0+XG5cdFx0XHRcdFx0PEZvcm1UZXh0SW5wdXQgey4uLmZpZWxkUHJvcHNbMF19IC8+XG5cdFx0XHRcdDwvRm9ybWlrPlxuXHRcdFx0PC9CbHVlQmFzZUFwcD5cblx0XHQpO1xuXG5cdFx0YXdhaXQgd2FpdEZvckVsZW1lbnQoY29tcG9uZW50IGFzIGFueSwgRm9ybVRleHRJbnB1dCk7XG5cblx0XHQvLyBleHBlY3QoY29tcG9uZW50KS50b01hdGNoU25hcHNob3QoKTtcblxuXHRcdC8vIENoZWNrIGZpZWxkc1xuXHRcdGV4cGVjdChjb21wb25lbnQuZmluZCgnVGV4dElucHV0JykubGFzdCgpLnByb3AoJ25hbWUnKSkudG9CZSgndXNlcm5hbWUnKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ1RleHRJbnB1dCcpLmxhc3QoKS5wcm9wKCd2YWx1ZScpKS50b0JlVW5kZWZpbmVkKCk7XG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdUZXh0SW5wdXQnKS5sYXN0KCkucHJvcCgndHlwZScpKS50b0JlKCd0ZXh0Jyk7XG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdUZXh0SW5wdXQnKS5sYXN0KCkucHJvcCgnaGVscGVyVGV4dCcpKS50b0JlKCdUaGlzIGlzIGEgaGVscGVyIHRleHQnKTtcblxuXHRcdGNvbnN0IG9uQ2hhbmdlVGV4dDogYW55ID0gY29tcG9uZW50LmZpbmQoJ1RleHRJbnB1dCcpLmZpcnN0KCkucHJvcCgnb25DaGFuZ2VUZXh0Jyk7XG5cblx0XHRvbkNoYW5nZVRleHQoJ2JhcicpO1xuXHRcdGNvbXBvbmVudC51cGRhdGUoKTtcblxuXHRcdC8vIGxldCBhbnkgcGVuZGluZyBjYWxsYmFja3MgaW4gUHJvbWlzZUpvYnMgcnVuXG5cdFx0YXdhaXQgUHJvbWlzZS5yZXNvbHZlKCk7XG5cblxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0Ly8gZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cdFx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ1RleHRJbnB1dCcpLmxhc3QoKS5wcm9wKCd2YWx1ZScpKS50b0JlKCdiYXInKTtcblx0XHRcdC8vIGV4cGVjdChvblN1Ym1pdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuXHRcdH0pO1xuXHR9KTtcblxuXG5cdGl0KCdzaG91bGQgcmVuZGVyIGVycm9yIHN0YXRlIGlmIHZhbGlkYXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGplc3QuZm4oKTtcblxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG1vdW50KFxuXHRcdFx0PEJsdWVCYXNlQXBwIHBsdWdpbnM9e1tQbHVnaW5dfT5cblx0XHRcdFx0PEZvcm1payBpbml0aWFsVmFsdWVzPXt7fX0gb25TdWJtaXQ9e29uU3VibWl0fT5cblx0XHRcdFx0XHQ8Rm9ybVRleHRJbnB1dCB7Li4uZmllbGRQcm9wc1swXX0gLz5cblx0XHRcdFx0PC9Gb3JtaWs+XG5cdFx0XHQ8L0JsdWVCYXNlQXBwPlxuXHRcdCk7XG5cblx0XHRhd2FpdCB3YWl0Rm9yRWxlbWVudChjb21wb25lbnQgYXMgYW55LCBGb3JtVGV4dElucHV0KTtcblxuXHRcdC8vIGV4cGVjdChjb21wb25lbnQpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXG5cdFx0Ly8gQ2hlY2sgZmllbGRzXG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdUZXh0SW5wdXQnKS5sYXN0KCkucHJvcCgnbmFtZScpKS50b0JlKCd1c2VybmFtZScpO1xuXHRcdGV4cGVjdChjb21wb25lbnQuZmluZCgnVGV4dElucHV0JykubGFzdCgpLnByb3AoJ3ZhbHVlJykpLnRvQmVVbmRlZmluZWQoKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ1RleHRJbnB1dCcpLmxhc3QoKS5wcm9wKCd0eXBlJykpLnRvQmUoJ3RleHQnKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ1RleHRJbnB1dCcpLmxhc3QoKS5wcm9wKCdoZWxwZXJUZXh0JykpLnRvQmUoJ1RoaXMgaXMgYSBoZWxwZXIgdGV4dCcpO1xuXG5cdFx0Y29uc3QgZm9ybWlrOiBhbnkgPSBjb21wb25lbnQuZmluZCgnRmllbGRJbm5lcicpLmZpcnN0KCkucHJvcCgnZm9ybWlrJyk7XG5cdFx0Ly8gZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cdFx0Zm9ybWlrLnNldEZpZWxkVmFsdWUoJ3VzZXJuYW1lJywgbnVsbCk7XG5cdFx0Zm9ybWlrLnZhbGlkYXRlRmllbGQoJ3VzZXJuYW1lJyk7XG5cdFx0Zm9ybWlrLmhhbmRsZVN1Ym1pdCgpO1xuXG5cdFx0Ly8gbGV0IGFueSBwZW5kaW5nIGNhbGxiYWNrcyBpbiBQcm9taXNlSm9icyBydW5cblx0XHRhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcblxuXHRcdGNvbXBvbmVudC51cGRhdGUoKTtcblxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0ZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cdFx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ1RleHRJbnB1dCcpLmxhc3QoKS5wcm9wKCdoZWxwZXJUZXh0JykpLnRvQmUoJ1RoaXMgaXMgYSBoZWxwZXIgdGV4dCcpO1xuXHRcdFx0Ly8gZXhwZWN0KG9uU3VibWl0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG5cdFx0fSk7XG5cdH0pO1xufSk7XG4iXX0=