3bb08424abcada30537d4942afc86e6d
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

Object.defineProperty(exports, "__esModule", {
  value: true
});

var tslib_1 = require("tslib");

var JsonSchemaParser_1 = require("../JsonSchemaParser");

var react_1 = tslib_1.__importDefault(require("react"));

var react_native_1 = require("react-native");

var react_test_renderer_1 = tslib_1.__importDefault(require("react-test-renderer"));

var Timeline = function Timeline(_a) {
  var children = _a.children,
      rest = tslib_1.__rest(_a, ["children"]);

  return react_1.default.createElement(react_native_1.Text, (0, _extends2.default)({}, rest), "Timeline: ", children);
};

var Post = function Post(_a) {
  var content = _a.content,
      rest = tslib_1.__rest(_a, ["content"]);

  return react_1.default.createElement(react_native_1.Text, (0, _extends2.default)({}, rest), "Post: ", content);
};

describe('JsonSchemaParser', function () {
  it('should parse schema with a single component', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser();
    var result = parser.parseSchema({
      component: Timeline
    });
    var tree = react_test_renderer_1.default.create(result).toJSON();
    expect(tree).toMatchSnapshot();
  });
  it('should parse schema with a single component with props', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser();
    var result = parser.parseSchema({
      component: Timeline,
      props: {
        style: {
          color: 'red'
        }
      }
    });
    var tree = react_test_renderer_1.default.create(result).toJSON();
    expect(tree).toMatchSnapshot();
  });
  it('should parse schema with a single component with text', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser();
    var result = parser.parseSchema({
      component: Timeline,
      text: 'Hello'
    });
    var tree = react_test_renderer_1.default.create(result).toJSON();
    expect(tree).toMatchSnapshot();
  });
  it('should parse schema with a single component with children', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser();
    var result = parser.parseSchema({
      component: Timeline,
      children: [{
        component: Post,
        props: {
          content: 'Hello'
        }
      }, {
        component: Post,
        props: {
          content: 'World'
        }
      }, {
        component: Post
      }]
    });
    var tree = react_test_renderer_1.default.create(result).toJSON();
    expect(tree).toMatchSnapshot();
  });
  it('should parse schema with custom component lookup', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser(function (node) {
      return node.component === 'Post' ? Post : null;
    });
    var result = parser.parseSchema({
      component: 'Post'
    });
    var tree = react_test_renderer_1.default.create(result).toJSON();
    expect(tree).toMatchSnapshot();
  });
  it('should throw error with undefined component', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser();

    var result = function result() {
      return parser.parseSchema({
        component: undefined
      });
    };

    expect(result).toThrow();
  });
  it('should throw error with unknown component', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser();

    var result = function result() {
      return parser.parseSchema({
        component: 'Foo'
      });
    };

    expect(result).toThrow();
  });
  it('parseSubSchemas should return an empty array if no params given', function () {
    var parser = new JsonSchemaParser_1.JsonSchemaParser();
    expect(parser.parseSubSchemas()).toHaveLength(0);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL211enphbWlsL0RvY3VtZW50cy9ibHVlYmFzZS9wbHVnaW4tanNvbi1zY2hlbWEtY29tcG9uZW50cy9zcmMvX190ZXN0c19fL0pzb25TY2hlbWFQYXJzZXIudGVzdC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxrQkFBQSxHQUFBLE9BQUEsQ0FBQSxxQkFBQSxDQUFBOztBQUNBLElBQUEsT0FBQSxHQUFBLE9BQUEsQ0FBQSxlQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsY0FBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBQ0EsSUFBQSxxQkFBQSxHQUFBLE9BQUEsQ0FBQSxlQUFBLENBQUEsT0FBQSxDQUFBLHFCQUFBLENBQUEsQ0FBQTs7QUFFQSxJQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVcsQ0FBQyxFQUFELEVBQStCO0FBQTlCLE1BQUUsUUFBRixHQUFVLEVBQVYsQ0FBRSxRQUFGO0FBQUEsTUFBWSxJQUFaLEdBQVksT0FBQSxDQUFBLE1BQUEsQ0FBQSxFQUFBLEVBQUEsQ0FBQSxVQUFBLENBQUEsQ0FBWjs7QUFBK0IsU0FBQSxPQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxjQUFBLENBQUEsSUFBRCxFQUFLLHVCQUFBLEVBQUEsRUFBSyxJQUFMLENBQUwsRSxZQUFBLEVBQTJCLFFBQTNCLENBQUE7QUFBMkMsQ0FBNUY7O0FBQ0EsSUFBTSxJQUFJLEdBQUcsU0FBUCxJQUFPLENBQUMsRUFBRCxFQUE4QjtBQUE3QixNQUFFLE9BQUYsR0FBUyxFQUFULENBQUUsT0FBRjtBQUFBLE1BQVcsSUFBWCxHQUFXLE9BQUEsQ0FBQSxNQUFBLENBQUEsRUFBQSxFQUFBLENBQUEsU0FBQSxDQUFBLENBQVg7O0FBQThCLFNBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxhQUFBLENBQUMsY0FBQSxDQUFBLElBQUQsRUFBSyx1QkFBQSxFQUFBLEVBQUssSUFBTCxDQUFM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ZW50Tm9kZSwgSnNvblNjaGVtYVBhcnNlciB9IGZyb20gJy4uL0pzb25TY2hlbWFQYXJzZXInO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFRleHQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHJlbmRlcmVyIGZyb20gJ3JlYWN0LXRlc3QtcmVuZGVyZXInO1xuXG5jb25zdCBUaW1lbGluZSA9ICh7IGNoaWxkcmVuLCAuLi5yZXN0IH06IGFueSkgPT4gPFRleHQgey4uLnJlc3R9PlRpbWVsaW5lOiB7Y2hpbGRyZW59PC9UZXh0PjtcbmNvbnN0IFBvc3QgPSAoeyBjb250ZW50LCAuLi5yZXN0IH06IGFueSkgPT4gPFRleHQgey4uLnJlc3R9PlBvc3Q6IHtjb250ZW50fTwvVGV4dD47XG5cbmRlc2NyaWJlKCdKc29uU2NoZW1hUGFyc2VyJywgKCkgPT4ge1xuXG5cdGl0KCdzaG91bGQgcGFyc2Ugc2NoZW1hIHdpdGggYSBzaW5nbGUgY29tcG9uZW50JywgKCkgPT4ge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gbmV3IEpzb25TY2hlbWFQYXJzZXIoKTtcblx0XHRjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2VTY2hlbWEoe1xuXHRcdFx0Y29tcG9uZW50OiBUaW1lbGluZSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IHRyZWUgPSByZW5kZXJlci5jcmVhdGUocmVzdWx0IGFzIFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+KS50b0pTT04oKTtcblx0XHRleHBlY3QodHJlZSkudG9NYXRjaFNuYXBzaG90KCk7XG5cdH0pO1xuXG5cdGl0KCdzaG91bGQgcGFyc2Ugc2NoZW1hIHdpdGggYSBzaW5nbGUgY29tcG9uZW50IHdpdGggcHJvcHMnLCAoKSA9PiB7XG5cblx0XHRjb25zdCBwYXJzZXIgPSBuZXcgSnNvblNjaGVtYVBhcnNlcigpO1xuXHRcdGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZVNjaGVtYSh7XG5cdFx0XHRjb21wb25lbnQ6IFRpbWVsaW5lLFxuXHRcdFx0cHJvcHM6IHtcblx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRjb2xvcjogJ3JlZCdcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdHJlZSA9IHJlbmRlcmVyLmNyZWF0ZShyZXN1bHQgYXMgUmVhY3QuUmVhY3RFbGVtZW50PGFueT4pLnRvSlNPTigpO1xuXHRcdGV4cGVjdCh0cmVlKS50b01hdGNoU25hcHNob3QoKTtcblx0fSk7XG5cblx0aXQoJ3Nob3VsZCBwYXJzZSBzY2hlbWEgd2l0aCBhIHNpbmdsZSBjb21wb25lbnQgd2l0aCB0ZXh0JywgKCkgPT4ge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gbmV3IEpzb25TY2hlbWFQYXJzZXIoKTtcblx0XHRjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2VTY2hlbWEoe1xuXHRcdFx0Y29tcG9uZW50OiBUaW1lbGluZSxcblx0XHRcdHRleHQ6ICdIZWxsbycsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0cmVlID0gcmVuZGVyZXIuY3JlYXRlKHJlc3VsdCBhcyBSZWFjdC5SZWFjdEVsZW1lbnQ8YW55PikudG9KU09OKCk7XG5cdFx0ZXhwZWN0KHRyZWUpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXHR9KTtcblxuXHRpdCgnc2hvdWxkIHBhcnNlIHNjaGVtYSB3aXRoIGEgc2luZ2xlIGNvbXBvbmVudCB3aXRoIGNoaWxkcmVuJywgKCkgPT4ge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gbmV3IEpzb25TY2hlbWFQYXJzZXIoKTtcblx0XHRjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2VTY2hlbWEoe1xuXHRcdFx0Y29tcG9uZW50OiBUaW1lbGluZSxcblx0XHRcdGNoaWxkcmVuOiBbe1xuXHRcdFx0XHRjb21wb25lbnQ6IFBvc3QsXG5cdFx0XHRcdHByb3BzOiB7IGNvbnRlbnQ6ICdIZWxsbycgfVxuXHRcdFx0fSwge1xuXHRcdFx0XHRjb21wb25lbnQ6IFBvc3QsXG5cdFx0XHRcdHByb3BzOiB7IGNvbnRlbnQ6ICdXb3JsZCcgfVxuXHRcdFx0fSwge1xuXHRcdFx0XHRjb21wb25lbnQ6IFBvc3QsXG5cdFx0XHR9XVxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdHJlZSA9IHJlbmRlcmVyLmNyZWF0ZShyZXN1bHQgYXMgUmVhY3QuUmVhY3RFbGVtZW50PGFueT4pLnRvSlNPTigpO1xuXHRcdGV4cGVjdCh0cmVlKS50b01hdGNoU25hcHNob3QoKTtcblx0fSk7XG5cblx0aXQoJ3Nob3VsZCBwYXJzZSBzY2hlbWEgd2l0aCBjdXN0b20gY29tcG9uZW50IGxvb2t1cCcsICgpID0+IHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IG5ldyBKc29uU2NoZW1hUGFyc2VyKChub2RlOiBKc29uQ29tcG9uZW50Tm9kZSkgPT4ge1xuXHRcdFx0cmV0dXJuIChub2RlLmNvbXBvbmVudCA9PT0gJ1Bvc3QnKSA/IFBvc3QgOiBudWxsO1xuXHRcdH0pO1xuXHRcdGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZVNjaGVtYSh7XG5cdFx0XHRjb21wb25lbnQ6ICdQb3N0Jyxcblx0XHR9KTtcblxuXHRcdGNvbnN0IHRyZWUgPSByZW5kZXJlci5jcmVhdGUocmVzdWx0IGFzIFJlYWN0LlJlYWN0RWxlbWVudDxhbnk+KS50b0pTT04oKTtcblx0XHRleHBlY3QodHJlZSkudG9NYXRjaFNuYXBzaG90KCk7XG5cdH0pO1xuXG5cdGl0KCdzaG91bGQgdGhyb3cgZXJyb3Igd2l0aCB1bmRlZmluZWQgY29tcG9uZW50JywgKCkgPT4ge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gbmV3IEpzb25TY2hlbWFQYXJzZXIoKTtcblx0XHRjb25zdCByZXN1bHQgPSAoKSA9PiBwYXJzZXIucGFyc2VTY2hlbWEoe1xuXHRcdFx0Y29tcG9uZW50OiB1bmRlZmluZWQgYXMgYW55LFxuXHRcdH0pO1xuXG5cdFx0ZXhwZWN0KHJlc3VsdCkudG9UaHJvdygpO1xuXHR9KTtcblxuXHRpdCgnc2hvdWxkIHRocm93IGVycm9yIHdpdGggdW5rbm93biBjb21wb25lbnQnLCAoKSA9PiB7XG5cblx0XHRjb25zdCBwYXJzZXIgPSBuZXcgSnNvblNjaGVtYVBhcnNlcigpO1xuXHRcdGNvbnN0IHJlc3VsdCA9ICgpID0+IHBhcnNlci5wYXJzZVNjaGVtYSh7XG5cdFx0XHRjb21wb25lbnQ6ICdGb28nLFxuXHRcdH0pO1xuXG5cdFx0ZXhwZWN0KHJlc3VsdCkudG9UaHJvdygpO1xuXHR9KTtcblxuXHRpdCgncGFyc2VTdWJTY2hlbWFzIHNob3VsZCByZXR1cm4gYW4gZW1wdHkgYXJyYXkgaWYgbm8gcGFyYW1zIGdpdmVuJywgKCkgPT4ge1xuXHRcdGNvbnN0IHBhcnNlciA9IG5ldyBKc29uU2NoZW1hUGFyc2VyKCk7XG5cdFx0ZXhwZWN0KHBhcnNlci5wYXJzZVN1YlNjaGVtYXMoKSkudG9IYXZlTGVuZ3RoKDApO1xuXHR9KTtcblxufSk7Il19