3d332ec1213a70f11a286209b71c1313
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

Object.defineProperty(exports, "__esModule", {
  value: true
});

var tslib_1 = require("tslib");

var core_1 = require("@bluebase/core");

var __1 = require("..");

var formik_1 = require("formik");

var index_1 = tslib_1.__importDefault(require("../../index"));

var react_1 = tslib_1.__importDefault(require("react"));

var react_native_1 = require("react-native");

var enzyme_1 = require("enzyme");

var enzyme_async_helpers_1 = require("enzyme-async-helpers");

var fields = [{
  label: 'Username',
  name: 'username',
  required: true,
  type: 'text'
}, {
  schema: {
    component: 'Text',
    text: 'Text Component'
  },
  type: 'component'
}, {
  label: 'Temp',
  max: 32,
  min: 16,
  name: 'temp',
  step: 1,
  type: 'range'
}];
var initialValues = {
  temp: 26,
  username: ''
};

var FieldWrapper = function FieldWrapper(props) {
  return react_1.default.createElement(react_native_1.Text, null, props.field.type);
};

describe('FormFields', function () {
  it('should render all form fields in the schema', function _callee() {
    var onSubmit, component;
    return _regenerator.default.async(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(__1.FormFields, {
              fields: fields
            }))));
            _context.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, __1.FormFields));

          case 4:
            expect(component.find('FormTextInput_TextInput_Noop').last().prop('name')).toBe('username');
            expect(component.find('FormRangeInput_FormTextInput_TextInput_Noop').last().prop('name')).toBe('temp');
            expect(component.find('JsonLayout_Noop Text').last().text()).toBe('Text Component');
            expect(component.find('FormFields').children()).toHaveLength(3);
            expect(component.find('FormFields').childAt(0).prop('name')).toBe('username');
            expect(component.find('FormFields').childAt(1).prop('name')).toBe('1-component');
            expect(component.find('FormFields').childAt(2).prop('name')).toBe('temp');

          case 11:
          case "end":
            return _context.stop();
        }
      }
    });
  });
  it('should not render any field if fields property is undefined', function _callee2() {
    var onSubmit, component;
    return _regenerator.default.async(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(__1.FormFields, {
              fields: undefined
            }))));
            _context2.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, __1.FormFields));

          case 4:
            expect(component.find('FormFields').last().children()).toHaveLength(0);

          case 5:
          case "end":
            return _context2.stop();
        }
      }
    });
  });
  it('should render custom children, if children prop is provided', function _callee3() {
    var onSubmit, component;
    return _regenerator.default.async(function _callee3$(_context3) {
      while (1) {
        switch (_context3.prev = _context3.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(__1.FormFields, {
              fields: fields
            }, function (renderField) {
              return fields.map(function (f, i) {
                return renderField(f, i, {});
              });
            }))));
            _context3.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, __1.FormFields));

          case 4:
            expect(component.find('FormTextInput_TextInput_Noop').last().prop('name')).toBe('username');
            expect(component.find('FormRangeInput_FormTextInput_TextInput_Noop').last().prop('name')).toBe('temp');
            expect(component.find('JsonLayout_Noop Text').last().text()).toBe('Text Component');

          case 7:
          case "end":
            return _context3.stop();
        }
      }
    });
  });
  it('should wrap fields in FieldWrapper component', function _callee4() {
    var onSubmit, component;
    return _regenerator.default.async(function _callee4$(_context4) {
      while (1) {
        switch (_context4.prev = _context4.next) {
          case 0:
            onSubmit = jest.fn();
            component = enzyme_1.mount(react_1.default.createElement(core_1.BlueBaseApp, {
              plugins: [index_1.default]
            }, react_1.default.createElement(formik_1.Formik, {
              initialValues: initialValues,
              onSubmit: onSubmit
            }, react_1.default.createElement(__1.FormFields, {
              fields: fields,
              FieldWrapper: FieldWrapper
            }))));
            _context4.next = 4;
            return _regenerator.default.awrap(enzyme_async_helpers_1.waitForElement(component, __1.FormFields));

          case 4:
            expect(component.find('FieldWrapper').at(0).text()).toBe('text');
            expect(component.find('FieldWrapper').at(1).text()).toBe('component');
            expect(component.find('FieldWrapper').at(2).text()).toBe('range');

          case 7:
          case "end":
            return _context4.stop();
        }
      }
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL211enphbWlsL0RvY3VtZW50cy9ibHVlYmFzZS9wbHVnaW4tanNvbi1zY2hlbWEtY29tcG9uZW50cy9zcmMvSnNvbkZvcm0vX190ZXN0c19fL0Zvcm1GaWVsZHMudGVzdC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxNQUFBLEdBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUE7O0FBR0EsSUFBQSxHQUFBLEdBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQTs7QUFDQSxJQUFBLFFBQUEsR0FBQSxPQUFBLENBQUEsUUFBQSxDQUFBOztBQUNBLElBQUEsT0FBQSxHQUFBLE9BQUEsQ0FBQSxlQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsT0FBQSxHQUFBLE9BQUEsQ0FBQSxlQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsY0FBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBQ0EsSUFBQSxRQUFBLEdBQUEsT0FBQSxDQUFBLFFBQUEsQ0FBQTs7QUFDQSxJQUFBLHNCQUFBLEdBQUEsT0FBQSxDQUFBLHNCQUFBLENBQUE7O0FBRUEsSUFBTSxNQUFNLEdBQXFCLENBQUM7QUFDakMsRUFBQSxLQUFLLEVBQUUsVUFEMEI7QUFFakMsRUFBQSxJQUFJLEVBQUUsVUFGMkI7QUFHakMsRUFBQSxRQUFRLEVBQUUsSUFIdUI7QUFJakMsRUFBQSxJQUFJLEVBQUU7QUFKMkIsQ0FBRCxFQUs5QjtBQUNGLEVBQUEsTUFBTSxFQUFFO0FBQUUsSUFBQSxTQUFTLEVBQUUsTUFBYjtBQUFxQixJQUFBLElBQUksRUFBRTtBQUEzQixHQUROO0FBRUYsRUFBQSxJQUFJLEVBQUU7QUFGSixDQUw4QixFQVE5QjtBQUNGLEVBQUEsS0FBSyxFQUFFLE1BREw7QUFFRixFQUFBLEdBQUcsRUFBRSxFQUZIO0FBR0YsRUFBQSxHQUFHLEVBQUUsRUFISDtBQUlGLEVBQUEsSUFBSSxF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cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmx1ZUJhc2VBcHAgfSBmcm9tICdAYmx1ZWJhc2UvY29yZSc7XG5pbXBvcnQgeyBGaWVsZFdyYXBwZXJQcm9wcyB9IGZyb20gJy4uL0Zvcm1GaWVsZHMnO1xuaW1wb3J0IHsgRm9ybUZpZWxkUHJvcHMgfSBmcm9tICcuLi9GaWVsZHMnO1xuaW1wb3J0IHsgRm9ybUZpZWxkcyB9IGZyb20gJy4uJztcbmltcG9ydCB7IEZvcm1payB9IGZyb20gJ2Zvcm1payc7XG5pbXBvcnQgUGx1Z2luIGZyb20gJy4uLy4uL2luZGV4JztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCB7IG1vdW50IH0gZnJvbSAnZW56eW1lJztcbmltcG9ydCB7IHdhaXRGb3JFbGVtZW50IH0gZnJvbSAnZW56eW1lLWFzeW5jLWhlbHBlcnMnO1xuXG5jb25zdCBmaWVsZHM6IEZvcm1GaWVsZFByb3BzW10gPSBbe1xuXHRsYWJlbDogJ1VzZXJuYW1lJyxcblx0bmFtZTogJ3VzZXJuYW1lJyxcblx0cmVxdWlyZWQ6IHRydWUsXG5cdHR5cGU6ICd0ZXh0Jyxcbn0sIHtcblx0c2NoZW1hOiB7IGNvbXBvbmVudDogJ1RleHQnLCB0ZXh0OiAnVGV4dCBDb21wb25lbnQnIH0sXG5cdHR5cGU6ICdjb21wb25lbnQnLFxufSwge1xuXHRsYWJlbDogJ1RlbXAnLFxuXHRtYXg6IDMyLFxuXHRtaW46IDE2LFxuXHRuYW1lOiAndGVtcCcsXG5cdHN0ZXA6IDEsXG5cdHR5cGU6ICdyYW5nZScsXG59XTtcblxuY29uc3QgaW5pdGlhbFZhbHVlcyA9IHtcblx0Ly8gJ2F1dG8tbG9naW4nOiB0cnVlLFxuXHQvLyBsYW5nOiAnanMnLFxuXHQvLyBwYXNzd29yZDogJycsXG5cdC8vIHJlbWVtYmVyOiB0cnVlLFxuXHR0ZW1wOiAyNixcblx0dXNlcm5hbWU6ICcnLFxufTtcblxuY29uc3QgRmllbGRXcmFwcGVyID0gKHByb3BzOiBGaWVsZFdyYXBwZXJQcm9wcykgPT4gKFxuXHQ8VGV4dD57cHJvcHMuZmllbGQudHlwZX08L1RleHQ+XG4pO1xuXG5cbmRlc2NyaWJlKCdGb3JtRmllbGRzJywgKCkgPT4ge1xuXG5cblx0aXQoJ3Nob3VsZCByZW5kZXIgYWxsIGZvcm0gZmllbGRzIGluIHRoZSBzY2hlbWEnLCBhc3luYyAoKSA9PiB7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGplc3QuZm4oKTtcblxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG1vdW50KFxuXHRcdFx0PEJsdWVCYXNlQXBwIHBsdWdpbnM9e1tQbHVnaW5dfT5cblx0XHRcdFx0PEZvcm1payBpbml0aWFsVmFsdWVzPXtpbml0aWFsVmFsdWVzfSBvblN1Ym1pdD17b25TdWJtaXR9PlxuXHRcdFx0XHRcdDxGb3JtRmllbGRzIGZpZWxkcz17ZmllbGRzfSAvPlxuXHRcdFx0XHQ8L0Zvcm1paz5cblx0XHRcdDwvQmx1ZUJhc2VBcHA+XG5cdFx0KTtcblxuXHRcdGF3YWl0IHdhaXRGb3JFbGVtZW50KGNvbXBvbmVudCBhcyBhbnksIEZvcm1GaWVsZHMpO1xuXG5cdFx0Ly8gZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cblx0XHQvLyBDaGVjayBmaWVsZHNcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0Zvcm1UZXh0SW5wdXRfVGV4dElucHV0X05vb3AnKS5sYXN0KCkucHJvcCgnbmFtZScpKS50b0JlKCd1c2VybmFtZScpO1xuXHRcdGV4cGVjdChjb21wb25lbnQuZmluZCgnRm9ybVJhbmdlSW5wdXRfRm9ybVRleHRJbnB1dF9UZXh0SW5wdXRfTm9vcCcpLmxhc3QoKS5wcm9wKCduYW1lJykpLnRvQmUoJ3RlbXAnKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0pzb25MYXlvdXRfTm9vcCBUZXh0JykubGFzdCgpLnRleHQoKSkudG9CZSgnVGV4dCBDb21wb25lbnQnKTtcblxuXHRcdGV4cGVjdChjb21wb25lbnQuZmluZCgnRm9ybUZpZWxkcycpLmNoaWxkcmVuKCkpLnRvSGF2ZUxlbmd0aCgzKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0Zvcm1GaWVsZHMnKS5jaGlsZEF0KDApLnByb3AoJ25hbWUnKSkudG9CZSgndXNlcm5hbWUnKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0Zvcm1GaWVsZHMnKS5jaGlsZEF0KDEpLnByb3AoJ25hbWUnKSkudG9CZSgnMS1jb21wb25lbnQnKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0Zvcm1GaWVsZHMnKS5jaGlsZEF0KDIpLnByb3AoJ25hbWUnKSkudG9CZSgndGVtcCcpO1xuXHR9KTtcblxuXHRpdCgnc2hvdWxkIG5vdCByZW5kZXIgYW55IGZpZWxkIGlmIGZpZWxkcyBwcm9wZXJ0eSBpcyB1bmRlZmluZWQnLCBhc3luYyAoKSA9PiB7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGplc3QuZm4oKTtcblxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG1vdW50KFxuXHRcdFx0PEJsdWVCYXNlQXBwIHBsdWdpbnM9e1tQbHVnaW5dfT5cblx0XHRcdFx0PEZvcm1payBpbml0aWFsVmFsdWVzPXtpbml0aWFsVmFsdWVzfSBvblN1Ym1pdD17b25TdWJtaXR9PlxuXHRcdFx0XHRcdDxGb3JtRmllbGRzIGZpZWxkcz17dW5kZWZpbmVkIGFzIGFueX0gLz5cblx0XHRcdFx0PC9Gb3JtaWs+XG5cdFx0XHQ8L0JsdWVCYXNlQXBwPlxuXHRcdCk7XG5cblx0XHRhd2FpdCB3YWl0Rm9yRWxlbWVudChjb21wb25lbnQgYXMgYW55LCBGb3JtRmllbGRzKTtcblxuXHRcdC8vIGV4cGVjdChjb21wb25lbnQpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdGb3JtRmllbGRzJykubGFzdCgpLmNoaWxkcmVuKCkpLnRvSGF2ZUxlbmd0aCgwKTtcblx0fSk7XG5cblx0aXQoJ3Nob3VsZCByZW5kZXIgY3VzdG9tIGNoaWxkcmVuLCBpZiBjaGlsZHJlbiBwcm9wIGlzIHByb3ZpZGVkJywgYXN5bmMgKCkgPT4ge1xuXG5cdFx0Y29uc3Qgb25TdWJtaXQgPSBqZXN0LmZuKCk7XG5cblx0XHRjb25zdCBjb21wb25lbnQgPSBtb3VudChcblx0XHRcdDxCbHVlQmFzZUFwcCBwbHVnaW5zPXtbUGx1Z2luXX0+XG5cdFx0XHRcdDxGb3JtaWsgaW5pdGlhbFZhbHVlcz17aW5pdGlhbFZhbHVlc30gb25TdWJtaXQ9e29uU3VibWl0fT5cblx0XHRcdFx0XHQ8Rm9ybUZpZWxkcyBmaWVsZHM9e2ZpZWxkc30+XG5cdFx0XHRcdFx0eyhyZW5kZXJGaWVsZCkgPT4gZmllbGRzLm1hcCgoZiwgaSkgPT4gcmVuZGVyRmllbGQoZiwgaSwge30gYXMgYW55KSl9XG5cdFx0XHRcdFx0PC9Gb3JtRmllbGRzPlxuXHRcdFx0XHQ8L0Zvcm1paz5cblx0XHRcdDwvQmx1ZUJhc2VBcHA+XG5cdFx0KTtcblxuXHRcdGF3YWl0IHdhaXRGb3JFbGVtZW50KGNvbXBvbmVudCBhcyBhbnksIEZvcm1GaWVsZHMpO1xuXG5cdFx0Ly8gZXhwZWN0KGNvbXBvbmVudCkudG9NYXRjaFNuYXBzaG90KCk7XG5cblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0Zvcm1UZXh0SW5wdXRfVGV4dElucHV0X05vb3AnKS5sYXN0KCkucHJvcCgnbmFtZScpKS50b0JlKCd1c2VybmFtZScpO1xuXHRcdGV4cGVjdChjb21wb25lbnQuZmluZCgnRm9ybVJhbmdlSW5wdXRfRm9ybVRleHRJbnB1dF9UZXh0SW5wdXRfTm9vcCcpLmxhc3QoKS5wcm9wKCduYW1lJykpLnRvQmUoJ3RlbXAnKTtcblxuXHRcdC8vIGV4cGVjdChjb21wb25lbnQuZmluZCgnSnNvbkxheW91dF9Ob29wJykubGFzdCgpLnByb3AoJ25hbWUnKSkudG9CZSgnMS1jb21wb25lbnQnKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0pzb25MYXlvdXRfTm9vcCBUZXh0JykubGFzdCgpLnRleHQoKSkudG9CZSgnVGV4dCBDb21wb25lbnQnKTtcblx0fSk7XG5cblxuXHRpdCgnc2hvdWxkIHdyYXAgZmllbGRzIGluIEZpZWxkV3JhcHBlciBjb21wb25lbnQnLCBhc3luYyAoKSA9PiB7XG5cblx0XHRjb25zdCBvblN1Ym1pdCA9IGplc3QuZm4oKTtcblxuXHRcdGNvbnN0IGNvbXBvbmVudCA9IG1vdW50KFxuXHRcdFx0PEJsdWVCYXNlQXBwIHBsdWdpbnM9e1tQbHVnaW5dfT5cblx0XHRcdFx0PEZvcm1payBpbml0aWFsVmFsdWVzPXtpbml0aWFsVmFsdWVzfSBvblN1Ym1pdD17b25TdWJtaXR9PlxuXHRcdFx0XHRcdDxGb3JtRmllbGRzIGZpZWxkcz17ZmllbGRzfSBGaWVsZFdyYXBwZXI9e0ZpZWxkV3JhcHBlcn0gLz5cblx0XHRcdFx0PC9Gb3JtaWs+XG5cdFx0XHQ8L0JsdWVCYXNlQXBwPlxuXHRcdCk7XG5cblx0XHRhd2FpdCB3YWl0Rm9yRWxlbWVudChjb21wb25lbnQgYXMgYW55LCBGb3JtRmllbGRzKTtcblxuXHRcdC8vIGV4cGVjdChjb21wb25lbnQpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdGaWVsZFdyYXBwZXInKS5hdCgwKS50ZXh0KCkpLnRvQmUoJ3RleHQnKTtcblx0XHRleHBlY3QoY29tcG9uZW50LmZpbmQoJ0ZpZWxkV3JhcHBlcicpLmF0KDEpLnRleHQoKSkudG9CZSgnY29tcG9uZW50Jyk7XG5cdFx0ZXhwZWN0KGNvbXBvbmVudC5maW5kKCdGaWVsZFdyYXBwZXInKS5hdCgyKS50ZXh0KCkpLnRvQmUoJ3JhbmdlJyk7XG5cdH0pO1xuXG5cblxufSk7XG4iXX0=