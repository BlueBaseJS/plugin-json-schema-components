f018459a17a877f8dbd7ab04629c00cb
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

Object.defineProperty(exports, "__esModule", {
  value: true
});

var tslib_1 = require("tslib");

var __1 = require("../");

var core_1 = require("@bluebase/core");

var react_1 = tslib_1.__importDefault(require("react"));

var react_test_renderer_1 = tslib_1.__importDefault(require("react-test-renderer"));

describe('JsonLayout', function () {
  test("should render a text component with red color", function (done) {
    var component = react_test_renderer_1.default.create(react_1.default.createElement(core_1.BlueBaseApp, null, react_1.default.createElement(__1.JsonLayout, {
      schema: {
        component: 'Text',
        props: {
          style: {
            color: 'red'
          }
        },
        text: 'This component is generated through JsonLayout Component'
      }
    })));
    setTimeout(function () {
      var tree = component.toJSON();
      expect(tree.props.style[1]).toMatchObject({
        color: 'red'
      });
      expect(tree.children.join()).toBe('This component is generated through JsonLayout Component');
      expect(tree).toMatchSnapshot();
      done();
    });
  });
  test("should create layout through createJsonLayout function", function (done) {
    var Layout = __1.createJsonLayout({
      schema: {
        component: 'Text',
        props: {
          style: {
            color: 'red'
          }
        },
        text: 'This component is generated through JsonLayout Component'
      }
    });

    var component = react_test_renderer_1.default.create(react_1.default.createElement(core_1.BlueBaseApp, null, react_1.default.createElement(Layout, null)));
    setTimeout(function () {
      var tree = component.toJSON();
      expect(tree.props.style[1]).toMatchObject({
        color: 'red'
      });
      expect(tree.children.join()).toBe('This component is generated through JsonLayout Component');
      expect(tree).toMatchSnapshot();
      done();
    });
  });
  test("should render a text component with red color that is processed by filters", function (done) {
    var filter = function filter(schema, args) {
      return (0, _extends2.default)({}, schema, {
        props: (0, _extends2.default)({}, schema.props, {
          style: (0, _extends2.default)({}, schema.props.style, args.style)
        }),
        text: 'Content changed by filter!'
      });
    };

    var component = react_test_renderer_1.default.create(react_1.default.createElement(core_1.BlueBaseApp, {
      filters: {
        'content-filter': filter
      }
    }, react_1.default.createElement(__1.JsonLayout, {
      filter: "content-filter",
      args: {
        style: {
          color: 'blue'
        }
      },
      schema: {
        component: 'Text',
        props: {
          style: {
            color: 'red'
          }
        },
        text: 'This component is generated through JsonLayout Component'
      }
    })));
    setTimeout(function () {
      var tree = component.toJSON();
      expect(tree.props.style[1]).toMatchObject({
        color: 'blue'
      });
      expect(tree.children.join()).toBe('Content changed by filter!');
      expect(tree).toMatchSnapshot();
      done();
    });
  });
  test("should render a null for unknown component", function (done) {
    var component = react_test_renderer_1.default.create(react_1.default.createElement(core_1.BlueBaseApp, null, react_1.default.createElement(__1.JsonLayout, {
      schema: {
        component: 'Foo',
        text: 'This component is generated through JsonLayout Component'
      }
    })));
    setTimeout(function () {
      var tree = component.toJSON();
      expect(tree).toMatchSnapshot();
      expect(tree.children[0].children.join()).toBe('ðŸš¨ BlueBase Error');
      expect(tree.children[1].children.join()).toBe('Could not parse React JSON Schema. Reason: Could not resolve component.');
      done();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL211enphbWlsL0RvY3VtZW50cy9ibHVlYmFzZS9wbHVnaW4tanNvbi1zY2hlbWEtY29tcG9uZW50cy9zcmMvSnNvbkxheW91dC9fX3Rlc3RzX18vSnNvblNjaGVtYS50ZXN0LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsS0FBQSxDQUFBOztBQUNBLElBQUEsTUFBQSxHQUFBLE9BQUEsQ0FBQSxnQkFBQSxDQUFBOztBQUNBLElBQUEsT0FBQSxHQUFBLE9BQUEsQ0FBQSxlQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEscUJBQUEsR0FBQSxPQUFBLENBQUEsZUFBQSxDQUFBLE9BQUEsQ0FBQSxxQkFBQSxDQUFBLENBQUE7O0FBRUEsUUFBUSxDQUFDLFlBQUQsRUFBZSxZQUFLO0FBRTNCLEVBQUEsSUFBSSxrREFBa0QsVUFBQyxJQUFELEVBQVM7QUFDOUQsUUFBTSxTQUFTLEdBQUcscUJBQUEsQ0FBQSxPQUFBLENBQWEsTUFBYixDQUNqQixPQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxNQUFBLENBQUEsV0FBRCxFQUFZLElBQVosRUFDQyxPQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQ0FBQyxHQUFBLENBQUEsVUFBRCxFQUFXO0FBQ1YsTUFBQSxNQUFNLEVBQUU7QUFDUCxRQUFBLFNBQVMsRUFBRSxNQURKO0FBRVAsUUFBQSxLQUFLLEVBQUU7QUFDTixVQUFBLEtBQUssRUFBRTtBQUNOLFlBQUEsS0FBSyxFQUFFO0FBREQ7QUFERCxTQUZBO0FBT1AsUUFBQSxJQUFJLEVBQUU7QUFQQztBQURFLEtBQVgsQ0FERCxDQURpQixDQUFsQjtBQWlCQSxJQUFBLFVBQVUsQ0FBQyxZQUFLO0FBQ2YsVUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLE1BQVYsRUFBYjtBQUNBLE1BQUEsTUFBTSxDQUFFLElBQVksQ0FBQyxLQUFiLENBQW1CLEtB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TSxDQUFFLElBQVksQ0FBQyxRQUFiLENBQXNCLENBQXRCLEVBQXlCLFFBQXpCLENBQWtDLElBQWxDLEVBQUYsQ0FBTixDQUNFLElBREYsQ0FDTyx5RUFEUDtBQUVBLE1BQUEsSUFBSTtBQUNKLEtBUFMsQ0FBVjtBQVFBLEdBdEJHLENBQUo7QUF3QkEsQ0FsSU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEpzb25MYXlvdXQsIGNyZWF0ZUpzb25MYXlvdXQgfSBmcm9tICcuLi8nO1xuaW1wb3J0IHsgQmx1ZUJhc2VBcHAgfSBmcm9tICdAYmx1ZWJhc2UvY29yZSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFRlc3RSZW5kZXJlciBmcm9tICdyZWFjdC10ZXN0LXJlbmRlcmVyJztcblxuZGVzY3JpYmUoJ0pzb25MYXlvdXQnLCAoKSA9PiB7XG5cblx0dGVzdChgc2hvdWxkIHJlbmRlciBhIHRleHQgY29tcG9uZW50IHdpdGggcmVkIGNvbG9yYCwgKGRvbmUpID0+IHtcblx0XHRjb25zdCBjb21wb25lbnQgPSBUZXN0UmVuZGVyZXIuY3JlYXRlKFxuXHRcdFx0PEJsdWVCYXNlQXBwPlxuXHRcdFx0XHQ8SnNvbkxheW91dFxuXHRcdFx0XHRcdHNjaGVtYT17e1xuXHRcdFx0XHRcdFx0Y29tcG9uZW50OiAnVGV4dCcsXG5cdFx0XHRcdFx0XHRwcm9wczoge1xuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdGNvbG9yOiAncmVkJ1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dGV4dDogJ1RoaXMgY29tcG9uZW50IGlzIGdlbmVyYXRlZCB0aHJvdWdoIEpzb25MYXlvdXQgQ29tcG9uZW50Jyxcblx0XHRcdFx0XHR9fVxuXHRcdFx0XHQvPlxuXHRcdFx0PC9CbHVlQmFzZUFwcD5cblx0XHQpO1xuXG5cblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGNvbnN0IHRyZWUgPSBjb21wb25lbnQudG9KU09OKCk7XG5cdFx0XHRleHBlY3QoKHRyZWUgYXMgYW55KS5wcm9wcy5zdHlsZVsxXSkudG9NYXRjaE9iamVjdCh7XG5cdFx0XHRcdGNvbG9yOiAncmVkJ1xuXHRcdFx0fSk7XG5cdFx0XHRleHBlY3QoKHRyZWUgYXMgYW55KS5jaGlsZHJlbi5qb2luKCkpLnRvQmUoJ1RoaXMgY29tcG9uZW50IGlzIGdlbmVyYXRlZCB0aHJvdWdoIEpzb25MYXlvdXQgQ29tcG9uZW50Jyk7XG5cdFx0XHRleHBlY3QodHJlZSkudG9NYXRjaFNuYXBzaG90KCk7XG5cdFx0XHRkb25lKCk7XG5cdFx0fSk7XG5cdH0pO1xuXG5cdHRlc3QoYHNob3VsZCBjcmVhdGUgbGF5b3V0IHRocm91Z2ggY3JlYXRlSnNvbkxheW91dCBmdW5jdGlvbmAsIChkb25lKSA9PiB7XG5cblx0XHRjb25zdCBMYXlvdXQgPSBjcmVhdGVKc29uTGF5b3V0KHtcblx0XHRcdHNjaGVtYToge1xuXHRcdFx0XHRjb21wb25lbnQ6ICdUZXh0Jyxcblx0XHRcdFx0cHJvcHM6IHtcblx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0Y29sb3I6ICdyZWQnXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0ZXh0OiAnVGhpcyBjb21wb25lbnQgaXMgZ2VuZXJhdGVkIHRocm91Z2ggSnNvbkxheW91dCBDb21wb25lbnQnLFxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNvbnN0IGNvbXBvbmVudCA9IFRlc3RSZW5kZXJlci5jcmVhdGUoXG5cdFx0XHQ8Qmx1ZUJhc2VBcHA+XG5cdFx0XHRcdDxMYXlvdXQvPlxuXHRcdFx0PC9CbHVlQmFzZUFwcD5cblx0XHQpO1xuXG5cblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGNvbnN0IHRyZWUgPSBjb21wb25lbnQudG9KU09OKCk7XG5cdFx0XHRleHBlY3QoKHRyZWUgYXMgYW55KS5wcm9wcy5zdHlsZVsxXSkudG9NYXRjaE9iamVjdCh7XG5cdFx0XHRcdGNvbG9yOiAncmVkJ1xuXHRcdFx0fSk7XG5cdFx0XHRleHBlY3QoKHRyZWUgYXMgYW55KS5jaGlsZHJlbi5qb2luKCkpLnRvQmUoJ1RoaXMgY29tcG9uZW50IGlzIGdlbmVyYXRlZCB0aHJvdWdoIEpzb25MYXlvdXQgQ29tcG9uZW50Jyk7XG5cdFx0XHRleHBlY3QodHJlZSkudG9NYXRjaFNuYXBzaG90KCk7XG5cdFx0XHRkb25lKCk7XG5cdFx0fSk7XG5cdH0pO1xuXG5cdHRlc3QoYHNob3VsZCByZW5kZXIgYSB0ZXh0IGNvbXBvbmVudCB3aXRoIHJlZCBjb2xvciB0aGF0IGlzIHByb2Nlc3NlZCBieSBmaWx0ZXJzYCwgKGRvbmUpID0+IHtcblxuXHRcdGNvbnN0IGZpbHRlciA9IChzY2hlbWE6IGFueSwgYXJnczogeyBzdHlsZTogYW55IH0pID0+ICh7XG5cdFx0XHQuLi5zY2hlbWEsXG5cdFx0XHRwcm9wczoge1xuXHRcdFx0XHQuLi5zY2hlbWEucHJvcHMsXG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0Li4uc2NoZW1hLnByb3BzLnN0eWxlLFxuXHRcdFx0XHRcdC4uLmFyZ3Muc3R5bGUsXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR0ZXh0OiAnQ29udGVudCBjaGFuZ2VkIGJ5IGZpbHRlciEnLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgY29tcG9uZW50ID0gVGVzdFJlbmRlcmVyLmNyZWF0ZShcblx0XHRcdDxCbHVlQmFzZUFwcCBmaWx0ZXJzPXt7ICdjb250ZW50LWZpbHRlcic6IGZpbHRlciB9fT5cblx0XHRcdFx0PEpzb25MYXlvdXRcblx0XHRcdFx0XHRmaWx0ZXI9XCJjb250ZW50LWZpbHRlclwiXG5cdFx0XHRcdFx0YXJncz17eyBzdHlsZTogeyBjb2xvcjogJ2JsdWUnIH0gfX1cblx0XHRcdFx0XHRzY2hlbWE9e3tcblx0XHRcdFx0XHRcdGNvbXBvbmVudDogJ1RleHQnLFxuXHRcdFx0XHRcdFx0cHJvcHM6IHtcblx0XHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0XHRjb2xvcjogJ3JlZCdcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHRleHQ6ICdUaGlzIGNvbXBvbmVudCBpcyBnZW5lcmF0ZWQgdGhyb3VnaCBKc29uTGF5b3V0IENvbXBvbmVudCcsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdC8+XG5cdFx0XHQ8L0JsdWVCYXNlQXBwPlxuXHRcdCk7XG5cblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdGNvbnN0IHRyZWUgPSBjb21wb25lbnQudG9KU09OKCk7XG5cdFx0XHRleHBlY3QoKHRyZWUgYXMgYW55KS5wcm9wcy5zdHlsZVsxXSkudG9NYXRjaE9iamVjdCh7XG5cdFx0XHRcdGNvbG9yOiAnYmx1ZSdcblx0XHRcdH0pO1xuXHRcdFx0ZXhwZWN0KCh0cmVlIGFzIGFueSkuY2hpbGRyZW4uam9pbigpKS50b0JlKCdDb250ZW50IGNoYW5nZWQgYnkgZmlsdGVyIScpO1xuXHRcdFx0ZXhwZWN0KHRyZWUpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXHRcdFx0ZG9uZSgpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHR0ZXN0KGBzaG91bGQgcmVuZGVyIGEgbnVsbCBmb3IgdW5rbm93biBjb21wb25lbnRgLCAoZG9uZSkgPT4ge1xuXG5cdFx0Y29uc3QgY29tcG9uZW50ID0gVGVzdFJlbmRlcmVyLmNyZWF0ZShcblx0XHRcdDxCbHVlQmFzZUFwcD5cblx0XHRcdFx0PEpzb25MYXlvdXRcblx0XHRcdFx0XHRzY2hlbWE9e3tcblx0XHRcdFx0XHRcdGNvbXBvbmVudDogJ0ZvbycsXG5cdFx0XHRcdFx0XHR0ZXh0OiAnVGhpcyBjb21wb25lbnQgaXMgZ2VuZXJhdGVkIHRocm91Z2ggSnNvbkxheW91dCBDb21wb25lbnQnLFxuXHRcdFx0XHRcdH19XG5cdFx0XHRcdC8+XG5cdFx0XHQ8L0JsdWVCYXNlQXBwPlxuXHRcdCk7XG5cblxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0Y29uc3QgdHJlZSA9IGNvbXBvbmVudC50b0pTT04oKTtcblx0XHRcdGV4cGVjdCh0cmVlKS50b01hdGNoU25hcHNob3QoKTtcblx0XHRcdGV4cGVjdCgodHJlZSBhcyBhbnkpLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmpvaW4oKSkudG9CZSgn8J+aqCBCbHVlQmFzZSBFcnJvcicpO1xuXHRcdFx0ZXhwZWN0KCh0cmVlIGFzIGFueSkuY2hpbGRyZW5bMV0uY2hpbGRyZW4uam9pbigpKVxuXHRcdFx0XHQudG9CZSgnQ291bGQgbm90IHBhcnNlIFJlYWN0IEpTT04gU2NoZW1hLiBSZWFzb246IENvdWxkIG5vdCByZXNvbHZlIGNvbXBvbmVudC4nKTtcblx0XHRcdGRvbmUoKTtcblx0XHR9KTtcblx0fSk7XG5cbn0pO1xuIl19